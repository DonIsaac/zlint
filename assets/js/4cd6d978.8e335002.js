"use strict";(self.webpackChunkzlint=self.webpackChunkzlint||[]).push([[2542],{1529:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"rules/homeless-try","title":"homeless-try","description":"Category: compiler","source":"@site/docs/rules/homeless-try.md","sourceDirName":"rules","slug":"/rules/homeless-try","permalink":"/zlint/docs/rules/homeless-try","draft":false,"unlisted":false,"editUrl":"https://github.com/DonIsaac/zlint/tree/main/apps/site/docs/rules/homeless-try.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"empty-file","permalink":"/zlint/docs/rules/empty-file"},"next":{"title":"line-length","permalink":"/zlint/docs/rules/line-length"}}');var t=s(4848),o=s(8453);const l={},i="homeless-try",c={},a=[{value:"What This Rule Does",id:"what-this-rule-does",level:2},{value:"Examples",id:"examples",level:2},{value:"Configuration",id:"configuration",level:2}];function d(e){const n={blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"homeless-try",children:(0,t.jsx)(n.code,{children:"homeless-try"})})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Category: compiler"}),"\n",(0,t.jsx)(n.p,{children:"Enabled by default?: Yes (error)"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"what-this-rule-does",children:"What This Rule Does"}),"\n",(0,t.jsxs)(n.p,{children:["Checks for ",(0,t.jsx)(n.code,{children:"try"})," statements used outside of error-returning functions."]}),"\n",(0,t.jsxs)(n.p,{children:["As a ",(0,t.jsx)(n.code,{children:"compiler"}),"-level lint, this rule checks for errors also caught by the\nZig compiler."]}),"\n",(0,t.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,t.jsxs)(n.p,{children:["Examples of ",(0,t.jsx)(n.strong,{children:"incorrect"})," code for this rule:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-zig",children:'const std = @import("std");\n\nvar not_in_a_function = try std.heap.page_allocator.alloc(u8, 8);\n\nfn foo() void {\n  var my_str = try std.heap.page_allocator.alloc(u8, 8);\n}\n\nfn bar() !void {\n  const Baz = struct {\n    property: u32 = try std.heap.page_allocator.alloc(u8, 8),\n  };\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Examples of ",(0,t.jsx)(n.strong,{children:"correct"})," code for this rule:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-zig",children:"fn foo() !void {\n  var my_str = try std.heap.page_allocator.alloc(u8, 8);\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Zig allows ",(0,t.jsx)(n.code,{children:"try"})," in comptime scopes in or nested within functions. This rule\ndoes not flag these cases."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-zig",children:'const std = @import("std");\nfn foo(x: u32) void {\n  comptime {\n    // valid\n    try bar(x);\n  }\n}\nfn bar(x: u32) !void {\n  return if (x == 0) error.Unreachable else void;\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Zig also allows ",(0,t.jsx)(n.code,{children:"try"})," on functions whose error union sets are empty. ZLint\ndoes ",(0,t.jsx)(n.em,{children:"not"})," respect this case. Please refactor such functions to not return\nan error union."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-zig",children:'const std = @import("std");\nfn foo() !u32 {\n  // compiles, but treated as a violation. `bar` should return `u32`.\n  const x = try bar();\n  return x + 1;\n}\nfn bar() u32 {\n  return 1;\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,t.jsx)(n.p,{children:"This rule has no configuration."})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>i});var r=s(6540);const t={},o=r.createContext(t);function l(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);